---
import Layout from "../layouts/Layout.astro";

const options = {
  method: "GET",
  headers: {
    accept: "application/json",
    Authorization: import.meta.env.PUBLIC_API_ACCESS_TOKEN,
  },
};

const data = await fetch(
  `https://api.themoviedb.org/3/genre/movie/list?language=en`,
  options
).then((r) => r.json());
---

<Layout title="Genre">
  <main class="container">
    <h1>Genre</h1>
    {
      data.genres.map((x) => (
        <p>
          <a
            href={
              import.meta.env.BASE_URL +
              "/genre/" +
              encodeURIComponent(x.name.toLowerCase())
            }
          >
            {x.name}
          </a>
          {/* {x.name} */}
        </p>
      ))
    }
  </main>
</Layout>
